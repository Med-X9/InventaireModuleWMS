Branch indexing
 > git rev-parse --resolve-git-dir /var/jenkins_home/caches/git-9a34e588d40d382664698b8646517189/.git # timeout=10
Setting origin to https://github.com/Med-X9/InventaireModuleWMS.git
 > git config remote.origin.url https://github.com/Med-X9/InventaireModuleWMS.git # timeout=10
Fetching origin...
Fetching upstream changes from origin
 > git --version # timeout=10
 > git --version # 'git version 2.39.5'
 > git config --get remote.origin.url # timeout=10
using GIT_ASKPASS to set credentials github-creds
 > git fetch --tags --force --progress -- origin +refs/heads/*:refs/remotes/origin/* # timeout=10
Seen branch in repository origin/dev
Seen branch in repository origin/dev-2
Seen branch in repository origin/devops
Seen branch in repository origin/main
Seen 4 remote branches
Obtained Jenkinsfile from d0a5f5d66129557e14b617c7a47d41ca2d0e0bb1
[Pipeline] Start of Pipeline
[Pipeline] node
Running on Jenkins in /var/jenkins_home/workspace/WMS_dev
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
The recommended git tool is: git
using credential github-creds
 > git rev-parse --resolve-git-dir /var/jenkins_home/workspace/WMS_dev/.git # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/Med-X9/InventaireModuleWMS.git # timeout=10
Fetching without tags
Fetching upstream changes from https://github.com/Med-X9/InventaireModuleWMS.git
 > git --version # timeout=10
 > git --version # 'git version 2.39.5'
using GIT_ASKPASS to set credentials github-creds
 > git fetch --no-tags --force --progress -- https://github.com/Med-X9/InventaireModuleWMS.git +refs/heads/*:refs/remotes/origin/* # timeout=10
Checking out Revision d0a5f5d66129557e14b617c7a47d41ca2d0e0bb1 (dev)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f d0a5f5d66129557e14b617c7a47d41ca2d0e0bb1 # timeout=10
Commit message: "update"
 > git rev-list --no-walk 44bf12fff2e69836df8cee8a902f1eb5b1929f62 # timeout=10
[Pipeline] }
[Pipeline] // stage
[Pipeline] withEnv
[Pipeline] {
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Load Configuration)
[Pipeline] script
[Pipeline] {
[Pipeline] fileExists
[Pipeline] readFile
[Pipeline] readYaml
[Pipeline] writeJSON
[Pipeline] echo
Configuration loaded successfully for branch: dev
[Pipeline] echo
Deploy target: 147.93.55.221
[Pipeline] echo
Environment: development
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Check Branch)
[Pipeline] script
[Pipeline] {
[Pipeline] readJSON
[Pipeline] echo
Proceeding with deployment on dev branch to development environment
[Pipeline] echo
Deploy target: 147.93.55.221
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Clone Repositories)
[Pipeline] readJSON
[Pipeline] script
[Pipeline] {
[Pipeline] readJSON
[Pipeline] withCredentials
Masking supported pattern matches of $GIT_PASS
[Pipeline] {
[Pipeline] sh
+ rm -rf /tmp/backend
+ git clone --single-branch --branch dev https://smatch-digital:****@github.com/Med-X9/InventaireModuleWMS.git /tmp/backend
Cloning into '/tmp/backend'...
+ [ ! -d /tmp/backend ]
+ echo Verifying essential files after clone...
Verifying essential files after clone...
+ cd /tmp/backend
+ git branch --show-current
+ echo Current branch: dev
Current branch: dev
+ git rev-parse HEAD
+ echo Commit: d0a5f5d66129557e14b617c7a47d41ca2d0e0bb1
Commit: d0a5f5d66129557e14b617c7a47d41ca2d0e0bb1
+ [ ! -f Dockerfile ]
+ [ ! -f docker-compose.yml ]
+ [ ! -f requirements.txt ]
+ echo ✓ Essential files verified
✓ Essential files verified
[Pipeline] }
[Pipeline] // withCredentials
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (SonarQube Analysis)
[Pipeline] readJSON
[Pipeline] tool
[Pipeline] withEnv
[Pipeline] {
[Pipeline] dir
Running in /tmp/backend
[Pipeline] {
[Pipeline] script
[Pipeline] {
[Pipeline] readJSON
[Pipeline] sh
+ echo Setting up Python environment...
Setting up Python environment...
[Pipeline] sh
+ python3 -m pip install --user -r requirements.txt
/usr/bin/python3: No module named pip
+ echo pip not available, skipping dependency installation
pip not available, skipping dependency installation
[Pipeline] withSonarQubeEnv
Injecting SonarQube environment variables using the configuration: SonarQube-Server
[Pipeline] {
[Pipeline] sh
+ echo Starting SonarQube analysis for branch: dev
Starting SonarQube analysis for branch: dev
+ timeout 300 /var/jenkins_home/tools/hudson.plugins.sonar.SonarRunnerInstallation/sonar-scanner/bin/sonar-scanner -Dsonar.projectKey=inventaire-module-wms-dev -Dsonar.projectName=InventaireModuleWMS-dev -Dsonar.projectVersion=1.0 -Dsonar.sources=apps,project,config -Dsonar.sourceEncoding=UTF-8 -Dsonar.language=py -Dsonar.python.version=3.12 -Dsonar.tests=apps -Dsonar.test.inclusions=**/tests/**/*.py,**/test_*.py -Dsonar.exclusions=**/migrations/**,**/staticfiles/**,**/static/**,**/media/**,**/__pycache__/**,**/venv/**,**/env/**,**/node_modules/**,**/*.pyc,**/manage.py,**/wsgi.py,**/asgi.py,**/settings/**,**/*.min.js,**/*.min.css -Dsonar.coverage.exclusions=**/migrations/**,**/tests/**,**/test_*.py,**/conftest.py,**/manage.py,**/wsgi.py,**/asgi.py,**/settings/**,**/__init__.py -Dsonar.cpd.exclusions=**/migrations/**,**/tests/** -Dsonar.qualitygate.wait=false
11:19:58.447 INFO  Scanner configuration file: /var/jenkins_home/tools/hudson.plugins.sonar.SonarRunnerInstallation/sonar-scanner/conf/sonar-scanner.properties
11:19:58.455 INFO  Project root configuration file: NONE
11:19:58.509 INFO  SonarScanner CLI 7.2.0.5079
11:19:58.516 INFO  Linux 5.15.0-1078-kvm amd64
11:20:08.373 ERROR Failed to query server version: Call to URL [http://147.93.55.221:9000/api/v2/analysis/version] failed: Connect timed out
11:20:08.373 INFO  EXECUTION FAILURE
11:20:08.374 INFO  Total time: 9.985s
+ echo Warning: SonarQube analysis timed out or failed, but continuing build...
Warning: SonarQube analysis timed out or failed, but continuing build...
+ exit 0
[Pipeline] }
WARN: Unable to locate 'report-task.txt' in the workspace. Did the SonarScanner succeed?
[Pipeline] // withSonarQubeEnv
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // dir
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (SonarQube Status Check)
[Pipeline] readJSON
[Pipeline] script
[Pipeline] {
[Pipeline] readJSON
[Pipeline] sleep
Sleeping for 10 sec
[Pipeline] withCredentials
Masking supported pattern matches of $SONAR_PASS
[Pipeline] {
[Pipeline] sh
+ curl -s -u admin:**** http://147.93.55.221:9000/api/qualitygates/project_status?projectKey=inventaire-module-wms-dev
[Pipeline] }
[Pipeline] // withCredentials
[Pipeline] echo
⚠️  SonarQube status check failed: script returned exit code 28
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build Backend Docker Image)
[Pipeline] readJSON
[Pipeline] dir
Running in /tmp/backend
[Pipeline] {
[Pipeline] script
[Pipeline] {
[Pipeline] sh
+ echo Checking for Dockerfile in /tmp/backend...
Checking for Dockerfile in /tmp/backend...
+ ls -la /tmp/backend/
+ head -20
total 8
drwxr-xr-x 2 jenkins jenkins 4096 Nov 24 11:22 .
drwxrwxrwt 1 root    root    4096 Nov 24 11:22 ..
+ [ ! -f Dockerfile ]
+ echo ERROR: Dockerfile not found in /tmp/backend!
ERROR: Dockerfile not found in /tmp/backend!
+ pwd
+ echo Current directory: /tmp/backend
Current directory: /tmp/backend
+ echo Files in current directory:
Files in current directory:
+ ls -la
total 8
drwxr-xr-x 2 jenkins jenkins 4096 Nov 24 11:22 .
drwxrwxrwt 1 root    root    4096 Nov 24 11:22 ..
+ exit 1
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // dir
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Push Docker Images)
Stage "Push Docker Images" skipped due to earlier failure(s)
[Pipeline] getContext
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Upload Essential Files)
Stage "Upload Essential Files" skipped due to earlier failure(s)
[Pipeline] getContext
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Deploy Backend on Remote Server)
Stage "Deploy Backend on Remote Server" skipped due to earlier failure(s)
[Pipeline] getContext
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Declarative: Post Actions)
[Pipeline] script
[Pipeline] {
[Pipeline] readJSON
[Pipeline] sh
+ rm -rf /tmp/backend
[Pipeline] sh
+ docker system prune -f
Total reclaimed space: 0B
[Pipeline] }
[Pipeline] // script
[Pipeline] script
[Pipeline] {
[Pipeline] echo
❌ Pipeline failed for development deployment!
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
ERROR: script returned exit code 1
Finished: FAILURE