# Repository Configuration
repository:
  url: "https://github.com/Med-X9/InventaireModuleWMS.git"

# Docker Configuration
docker:
  image_prefix: "smatchdigital"
  backend_image_name: "backend-app"

# Environment-specific Configuration
environments:
  # Development Environment
  dev:
    deploy_host: "147.93.55.221"
    deploy_creds: "dev-test-creds"
    env_name: "development"
    image_tag_suffix: "dev-latest"
  
  # Production Environment
  main:
    deploy_host: "31.97.158.68"
    deploy_creds: "prod-creds"
    env_name: "production"
    image_tag_suffix: "prod-latest"

# Credentials Configuration
credentials:
  git_credentials_id: "git-cred"
  docker_credentials_id: "docker-hub-company"

# SonarQube Configuration
sonarqube:
  enabled: true
  project_key: "inventaire-module-wms"
  project_name: "InventaireModuleWMS"
  project_version: "1.0"
  server_name: "SonarQube-Server"
  server_url: "http://147.93.55.221:9000"
  credentials_id: "sonar-token"
  api_credentials_id: "sonar-creds"
  
  # Analysis Configuration
  analysis_branches: ["main", "devops", "dev"]
  sources: "apps,project,config"
  source_encoding: "UTF-8"
  language: "py"
  python_version: "3.12"
  tests: "apps"
  test_inclusions: "**/tests/**/*.py,**/test_*.py"
  exclusions: "**/migrations/**,**/staticfiles/**,**/static/**,**/media/**,**/__pycache__/**,**/venv/**,**/env/**,**/node_modules/**,**/*.pyc,**/manage.py,**/wsgi.py,**/asgi.py,**/settings/**,**/*.min.js,**/*.min.css"
  coverage_exclusions: "**/migrations/**,**/tests/**,**/test_*.py,**/conftest.py,**/manage.py,**/wsgi.py,**/asgi.py,**/settings/**,**/__init__.py"
  cpd_exclusions: "**/migrations/**,**/tests/**"
  quality_gate_wait: false
  
  # Status Check Configuration
  status_check_enabled: true
  status_check_delay: 10  # seconds
  
  # Setup Commands (run before analysis)
  setup_commands:
    - "echo 'Setting up Python environment...'"
    - "python3 -m pip install --user -r requirements.txt"

# Deployment Configuration
deployment:
  remote_path: "/tmp/deployment/backend"
  
  # Files to upload to remote server
  files_to_upload:
    - "docker-compose.yml"
    - "Dockerfile"
    - "nginx/*"
  
  # Environment file configuration
  env_file:
    source: ".env copy"
    target: ".env"
  
  # Commands to run for deployment
  deploy_commands:
    - "docker-compose down -v"
    - "docker-compose pull"
    - "docker-compose up -d"

# Cleanup Configuration
cleanup:
  commands:
    - "rm -rf /tmp/backend || true"
    - "docker system prune -f || true"